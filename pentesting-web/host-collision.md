# Host collision

## 工具

```bash
# https://github.com/fofapro/Hosts_scan
# 读取 ip.txt 和 hosts.txt 遍历匹配访问

# https://github.com/pmiaowu/HostCollision
# 读取 dataSource 目录 ipList.txt 和 hostList.txt 的数据,进行遍历匹配访问
java -jar HostCollision.jar

# https://github.com/cckuailong/hostscan
# 包含一个测试环境
```

## 获取目标的 IP 资产

```bash
# 通过已有的的域名列表获取 A 记录对应的 IP 地址
dnsx -l resolved.txt -json | jq -r '.a?[]?' | anew ips.txt
```

## 获取指向内网地址的域名

筛选 dnsx 解析结果 a 记录为内网地址的域名

{% code overflow="wrap" %}
```bash
# 注意, test() 内包裹的是筛选内网地址的正则表达式, 假设你有更好的正则, 请随意替换
jq -r 'select(.a | if type == "array" then any(.[]?; test("\\b(?:10\\.|172\\.(?:1[6-9]|2[0-9]|3[0-1])\\.|192\\.168\\.)\\d{1,3}\\.\\d{1,3}\\b")) else test("\\b(?:10\\.|172\\.(?:1[6-9]|2[0-9]|3[0-1])\\.|192\\.168\\.)\\d{1,3}\\.\\d{1,3}\\b") end?) | .host' your_file.json
```
{% endcode %}
